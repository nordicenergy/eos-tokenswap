exports.ids=[2],exports.modules={100:function(t,e,r){"use strict";r.r(e);var o=r(89),c=r(11),n=r(1),l=r(22),d=r(10),h={head(){return{title:`TOKENSWAP | Sell ${this.order.sell.quantity} for ${this.order.buy.quantity} by omgnoob4ever`}},components:{TokenImage:o.a},data:()=>({order:{},no_found:!1,loading:!0}),computed:{...Object(d.mapGetters)("chain",["rpc","scatter"]),...Object(d.mapGetters)(["user"])},async asyncData({store:t,error:e,params:r}){const o=t.getters["chain/rpc"];try{let t=(await o.get_table_rows({code:n.a.contract,scope:n.a.contract,table:"orders",lower_bound:r.id,limit:1})).rows[0];if(t&&t.id==r.id)return{order:t,loading:!1};e({message:`Order ${r.id} not found or finished`,statusCode:404})}catch(t){return Object(c.captureException)(t),e({message:"Error fetching order: "+t,statusCode:500})}},methods:{async login(){this.loading=!0;try{await this.$store.dispatch("chain/login")}catch(t){Object(c.captureException)(t),this.$notify({title:"Loading error",message:t.message,type:"error"})}finally{this.loading=!1}},async cancelOrder(t){if(!this.user)return this.$notify({title:"Authorization",message:"Pleace login first",type:"info"});const e=this.$loading({lock:!0,text:"Wait for Scatter"});try{let t=this.order;await Object(l.cancelorder)(t.maker,t.id),this.$notify({title:"Success",message:`Order canceled ${t.id}`,type:"success"}),this.$router.push({name:"index"})}catch(e){Object(c.captureException)(e,{extra:{order:t}}),this.$notify({title:"Place order",message:e.message,type:"error"}),console.log(e)}finally{e.close()}},async fetchOrder(){},async buy(){if(!this.$store.state.chain.scatterConnected)return this.$notify({title:"Authorization",message:"Pleace connect Scatter",type:"info"});const t=this.$loading({lock:!0,text:"Wait for Scatter"});this.$store.state.chain.scatterConnected&&!this.$store.state.user&&await this.$store.dispatch("chain/login");try{let{buy:e,sell:r,id:o}=this.order,d=await Object(l.transfer)(e.contract,this.user.name,e.quantity,`fill|${o}`);this.$alert(`<a href="${n.a.monitor}/tx/${d.transaction_id}" target="_blank">Transaction id</a>`,"Transaction complete!",{dangerouslyUseHTMLString:!0,confirmButtonText:"OK",callback:t=>{this.$router.push({name:"index"}),this.$notify({title:"Success",message:`You fill ${o} order`,type:"success"})}})}catch(t){Object(c.captureException)(t,{extra:{order:this.order}}),this.$notify({title:"Place order",message:t.message,type:"error"}),console.log(t)}finally{t.close()}}}},f=r(3);var component=Object(f.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.no_found?r("el-card",{staticClass:"box-card mt-3"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Order: "+t._s(t.id))]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"index"})}}},[t._v("Go to main page")])],1),r("div",{staticClass:"text item text-center"},[r("h1",{staticClass:"display-4"},[t._v("Order "+t._s(t.id)+" not found or finished")])])]):r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card mt-3"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Order "+t._s(t.order.id)+" created by  "),r("a",{attrs:{href:t._f("monitorAccount")(t.order.maker),target:"_blank"}},[t._v(t._s(t.order.maker))])]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"index"})}}},[t._v("Go to main page")])],1),t.order.maker?r("div",{staticClass:"text item"},[r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-6 text-center bordered"},[r("h2",[t._v("Sell")]),r("hr"),r("TokenImage",{staticClass:"mr-2 mb-2",attrs:{src:t.$tokenLogo(t.order.sell.quantity.split(" ")[1],t.order.sell.contract),height:"50"}}),r("div",{staticClass:"lead"},[t._v(t._s(t.order.sell.quantity)+"@"),r("a",{attrs:{href:t._f("monitorAccount")(t.order.sell.contract),target:"_blank"}},[t._v(t._s(t.order.sell.contract))])])],1),r("div",{staticClass:"col-6 text-center"},[r("h2",[t._v("Buy")]),r("hr"),r("TokenImage",{staticClass:"mr-2 mb-2",attrs:{src:t.$tokenLogo(t.order.buy.quantity.split(" ")[1],t.order.buy.contract),height:"50"}}),r("div",{staticClass:"lead"},[t._v(t._s(t.order.buy.quantity)+"@"),r("a",{attrs:{href:t._f("monitorAccount")(t.order.buy.contract),target:"_blank"}},[t._v(t._s(t.order.buy.contract))])])],1)]),t.user?r("div",[t.user&&t.order.maker==t.user.name?r("el-button",{staticClass:"w-100",attrs:{type:"warning"},on:{click:t.cancelOrder}},[t._v("Cancel order")]):r("el-button",{staticClass:"w-100",attrs:{type:"primary"},on:{click:t.buy}},[t._v("Buy   "+t._s(t.order.sell.quantity)+"@"+t._s(t.order.sell.contract))])],1):r("div",[r("el-button",{staticClass:"w-100",on:{click:t.login}},[t._v("Pleace login")])],1)]):t._e()])},[],!1,function(t){var e=r(93);e.__inject__&&e.__inject__(t)},null,"edcf4e04");e.default=component.exports},89:function(t,e,r){"use strict";var o={props:{src:{type:String,default:""},height:{type:String,default:"30"}},data:()=>({error:!1})},c=r(3),component=Object(c.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.error?r("svg",{attrs:{viewBox:"64 64 896 896","data-icon":"dollar",width:t.height,height:t.height,fill:"currentColor","aria-hidden":"true"}},[t._ssrNode('<path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"></path>')]):r("img",{attrs:{src:t.src,height:t.height},on:{error:function(e){t.error=!0}}})},[],!1,null,null,"82a20038");e.a=component.exports},90:function(t,e,r){var content=r(94);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=r(5).default;t.exports.__inject__=function(t){o("7366a1d1",content,!0,t)}},93:function(t,e,r){"use strict";r.r(e);var o=r(90),c=r.n(o);for(var n in o)"default"!==n&&function(t){r.d(e,t,function(){return o[t]})}(n);e.default=c.a},94:function(t,e,r){(t.exports=r(4)(!1)).push([t.i,".bordered{border-right:1px solid}",""])}};
//# sourceMappingURL=fd68999e00150197004a.js.map